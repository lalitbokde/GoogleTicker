@model IEnumerable<CpaTicker.Areas.admin.Models.EditTickerViewModel>

@{
    ViewBag.Title = "Edit Ticker";
    ViewBag.hash = Url.Action("Index");
}

<div class="row tspark">
	@Html.Partial("_Sparks")
</div>

<section id="widget-grid">

    <div class="row">

        <div class="table-section col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <div class="table-content">
                <div class="table-title">Edit ticker</div>

                <!-- NEW COL START -->
                <article>

                    <!-- Widget ID (each widget will need unique ID)-->
                    <div class="jarviswidget" id="wid-id-1" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false" data-widget-togglebutton="false">

                        <!-- widget div-->
                        <div>

                            <!-- widget content -->
                            <div class="widget-body no-padding">

                                @using (Html.BeginForm("edit", "ticker", FormMethod.Post, new { @id = "editTicker" }))
                                {
                                    @Html.AntiForgeryToken()

                                    <div class="smart-form">
                                        <footer>
                                            <nav>
                                                <button class="btn btn-primary" type="submit" id="submit_button"><i class="fa fa-save"></i> Save</button>
                                                @Html.ActionLink("Back", "index", null, new { @class = "btn btn-default", @id = "back_button" })
                                            </nav>
                                        </footer>

                                        @*<fieldset>
                                                <legend>
                                                    Ticker Campaigns
                                                    @Html.CheckBoxSmart("all", "Toggle All", (bool)ViewBag.Ticker.All)
                                                </legend>


                                                    <section>

                                                        <div id="pck">

                                                            <div class="row">
                                                                @foreach (var item in Model)
                                                                {
                                                                    <label class="checkbox">
                                                                        <input name="cp" type="checkbox" value="@item.CamapaignId"
                                                                        @if (item.HasCampaign)
                                                                        {
                                                                            @:checked="checked"
                                                                        }
                                                                        /><i></i>@item.CamapaignName</label>
                                                                }
                                                            </div>
                                                        </div>

                                                    </section>
                                            </fieldset>*@
                                    </div>
                                    <div class="smart-fieldset">
                                        <fieldset>
                                            <legend>Ticker Speed</legend>

                                            <div class="row">
                                                <div class="col-sm-12">
                                                    <input type="text" class="bslider slider-primary" id="sa5" value="@ViewBag.Ticker.Speed" name="speed"
                                                           data-slider-min="1"
                                                           data-slider-max="1000"
                                                           data-slider-value="@ViewBag.Ticker.Speed"
                                                           data-slider-selection="before"
                                                           data-slider-handle="round" />
                                                </div>
                                            </div>

                                        </fieldset>
                                    </div>

                                    <div class="smart-form" style="padding-bottom:20px;">
                                        <fieldset>
                                            <legend>Ticker View</legend>

                                            <section>
                                                <div id="pck2">
                                                    <div class="row">
                                                        @Html.CheckboxListForEnumBootStrap("views", (CpaTicker.Areas.admin.Classes.TickerView)ViewBag.Ticker.View)
                                                    </div>
                                                </div>
                                            </section>
                                        </fieldset>
                                        <fieldset>
                                            <legend>Ticker Direction</legend>
                                            <div class="row">
                                                <div class="col col-2">
                                                    @Html.RadioBoxSmart("dir", "Right to Left", "true", (bool)ViewBag.Ticker.Direction)
                                                </div>
                                                <div class="col col-2">
                                                    @Html.RadioBoxSmart("dir", "Left to Right", "false", !(bool)ViewBag.Ticker.Direction)
                                                </div>
                                            </div>
                                        </fieldset>

                                        <fieldset>
                                            <legend>Ticker Colors</legend>
                                            <div class="row">
                                                <section class="col col-3">
                                                    @*@Html.Label("BackgroundColor", new { @class = "label" })*@
                                                    <label class="label" for="BackgroundColor">Background Color</label>
                                                    <label class="input">
                                                        @*@Html.TextBoxFor(model => model.BackgroundColor, new { @class = "clpk" })*@
                                                        <input id="BackgroundColor" class="clpk" type="text" value="@ViewBag.Ticker.BackgroundColor" name="BackgroundColor">
                                                        <i class="icon-append fa fa-tint"></i>
                                                    </label>
                                                </section>
                                                <section class="col col-3">
                                                    @*@Html.LabelFor(model => model.CampaignColor, new { @class = "label" })*@
                                                    <label class="label" for="CampaignColor">Campaign Color</label>
                                                    <label class="input">
                                                        <input id="CampaignColor" class="clpk" type="text" value="@ViewBag.Ticker.CampaignColor" name="CampaignColor">
                                                        <i class="icon-append fa fa-tint"></i>
                                                        @*@Html.TextBoxFor(model => model.CampaignColor, new { @class = "clpk" })*@
                                                    </label>
                                                </section>
                                                <section class="col col-3">
                                                    <label class="label" for="ImpressionColor">Impression Color</label>
                                                    @*@Html.LabelFor(model => model.ImpressionColor, new { @class = "label" })*@
                                                    <label class="input">
                                                        <i class="icon-append fa fa-tint"></i>
                                                        <input id="ImpressionColor" class="clpk" type="text" value="@ViewBag.Ticker.ImpressionColor" name="ImpressionColor">
                                                        @*@Html.TextBoxFor(model => model.ImpressionColor, new { @class = "clpk" })*@
                                                    </label>
                                                </section>
                                                <section class="col col-3">
                                                    <label class="label" for="ClickColor">Click Color</label>
                                                    @*@Html.LabelFor(model => model.ClickColor, new { @class = "label" })*@
                                                    <label class="input">
                                                        <i class="icon-append fa fa-tint"></i>
                                                        <input id="ClickColor" class="clpk" type="text" value="@ViewBag.Ticker.ClickColor" name="ClickColor">
                                                        @*@Html.TextBoxFor(model => model.ClickColor, new { @class = "clpk" })*@
                                                    </label>
                                                </section>
                                            </div>
                                            <div class="row">
                                                <section class="col col-3">
                                                    <label class="label" for="ConversionColor">Conversion Color</label>
                                                    @*@Html.LabelFor(model => model.ConversionColor, new { @class = "label" })*@
                                                    <label class="input">
                                                        <input id="ConversionColor" class="clpk" type="text" value="@ViewBag.Ticker.ConversionColor" name="ConversionColor">
                                                        @*@Html.TextBoxFor(model => model.ConversionColor, new { @class = "clpk" })*@
                                                        <i class="icon-append fa fa-tint"></i>
                                                    </label>
                                                </section>
                                            </div>
                                        </fieldset>
                                    </div>
                                }

                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->

                    </div>
                    <!-- end widget -->

                </article>
                <!-- END COL -->

            </div>
        </div>

    </div>

</section>

<script type="text/javascript">
    // DO NOT REMOVE : GLOBAL FUNCTIONS!
    pageSetUp();
        
    // PAGE RELATED SCRIPTS
    updateBreadCrumb('Ticker/Edit');

    $('#submit_button').click(function (e) {
        e.preventDefault();
        var f = this.form;
        container = $('#content');
        pajaxSubmit(f, container, '@ViewBag.hash');
        refreshTicker();
        return false; // keeps the page from not refreshing 
    });

    $(function () {
        var labels = $('#pck label');
        ncols = 4;
        col = 12 / ncols;
        j = Math.ceil(labels.length / ncols);

        $.each(labels, function (i, el) {
            if (i % j == 0) {
                labels.slice(i, i + j).wrapAll('<div class="col col-' + col + '">');
            }
        });

        var allcheckbox = $('legend :checkbox');
        labels.find(':checkbox').click(function () {
            if (!this.checked) {
                allcheckbox.prop('checked', false);
            }
        });

        allcheckbox.on('click', function () {
            $(this).closest('fieldset').find(':checkbox').prop('checked', this.checked);
        });
    });

    $(function () {
        var labels = $('#pck2 label');

        ncols = 6;
        col = 12 / ncols;
        j = Math.ceil(labels.length / ncols);

        $.each(labels, function (i, el) {
            if (i % j == 0) {
                labels.slice(i, i + j).wrapAll('<div class="col col-' + col + '">');
            }
        });
    });

    loadScript("@Url.Content("~/Content/js/plugin/bootstrap-slider/bootstrap-slider.js")", function () {
        if ($.fn.bslider) {
            $('.bslider').bslider();
        }
    });

    loadScript("@Url.Content("~/Content/js/plugin/colorpicker/bootstrap-colorpicker.min.js")", function () {
        $('.clpk').each(function () {
            var $this = $(this);
            $this.colorpicker();
        });
    });

</script>
